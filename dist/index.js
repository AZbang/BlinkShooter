(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
const Level = require('./states/Level.js');

class Boot {
	constructor(game) {
		this.game = game;
	}

	preload() {
		this.load.tilemap('map', '../assets/levels/test/level.json', null, Phaser.Tilemap.TILED_JSON);
		this.load.image('tilemap', '../assets/levels/tilemap.png');
		this.load.image('bg', '../assets/bg.png');
		this.load.image('person1', '../assets/_/characters/example.png');

		this.load.atlas('heads', 'assets/atlases/heads.png', 'assets/atlases/heads.json', Phaser.Loader.TEXTURE_ATLAS_JSON_HASH);
		this.load.atlas('bodies', 'assets/atlases/bodies.png', 'assets/atlases/bodies.json', Phaser.Loader.TEXTURE_ATLAS_JSON_HASH);
		this.load.atlas('attachToBody', 'assets/atlases/attachToBody.png', 'assets/atlases/attachToBody.json', Phaser.Loader.TEXTURE_ATLAS_JSON_HASH);
		this.load.atlas('weapons', 'assets/atlases/weapons.png', 'assets/atlases/weapons.json', Phaser.Loader.TEXTURE_ATLAS_JSON_HASH);
		this.load.atlas('items', 'assets/atlases/items.png', 'assets/atlases/items.json', Phaser.Loader.TEXTURE_ATLAS_JSON_HASH);
		this.load.atlas('bullets', 'assets/atlases/bullets.png', 'assets/atlases/bullets.json', Phaser.Loader.TEXTURE_ATLAS_JSON_HASH);
	}

	create() {
		this.pathfinder = this.game.plugins.add(Phaser.Plugin.PathFinderPlugin);

		this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;
		this.game.scale.fullScreenScaleMode = Phaser.ScaleManager.EXACT_FIT;
		this.game.scale.pageAlignHorizontally = true;
		this.game.scale.pageAlignVertically = true;
		this.game.scale.setMaximum();

		this.game.renderer.renderSession.roundPixels = true;
		Phaser.Canvas.setImageRenderingCrisp(this.game.canvas);

		this.game.physics.startSystem(Phaser.Physics.ARCADE);

		this.level = new Level(this);
	}

	update() {
		this.level.update();
	}
}

module.exports = Boot;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkJvb3QuanMiXSwibmFtZXMiOlsiTGV2ZWwiLCJyZXF1aXJlIiwiQm9vdCIsImNvbnN0cnVjdG9yIiwiZ2FtZSIsInByZWxvYWQiLCJsb2FkIiwidGlsZW1hcCIsIlBoYXNlciIsIlRpbGVtYXAiLCJUSUxFRF9KU09OIiwiaW1hZ2UiLCJhdGxhcyIsIkxvYWRlciIsIlRFWFRVUkVfQVRMQVNfSlNPTl9IQVNIIiwiY3JlYXRlIiwicGF0aGZpbmRlciIsInBsdWdpbnMiLCJhZGQiLCJQbHVnaW4iLCJQYXRoRmluZGVyUGx1Z2luIiwic2NhbGUiLCJzY2FsZU1vZGUiLCJTY2FsZU1hbmFnZXIiLCJTSE9XX0FMTCIsImZ1bGxTY3JlZW5TY2FsZU1vZGUiLCJFWEFDVF9GSVQiLCJwYWdlQWxpZ25Ib3Jpem9udGFsbHkiLCJwYWdlQWxpZ25WZXJ0aWNhbGx5Iiwic2V0TWF4aW11bSIsInJlbmRlcmVyIiwicmVuZGVyU2Vzc2lvbiIsInJvdW5kUGl4ZWxzIiwiQ2FudmFzIiwic2V0SW1hZ2VSZW5kZXJpbmdDcmlzcCIsImNhbnZhcyIsInBoeXNpY3MiLCJzdGFydFN5c3RlbSIsIlBoeXNpY3MiLCJBUkNBREUiLCJsZXZlbCIsInVwZGF0ZSIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFFBQVFDLFFBQVEsbUJBQVIsQ0FBZDs7QUFFQSxNQUFNQyxJQUFOLENBQVc7QUFDVkMsYUFBWUMsSUFBWixFQUFrQjtBQUNqQixPQUFLQSxJQUFMLEdBQVlBLElBQVo7QUFDQTs7QUFFREMsV0FBVTtBQUNULE9BQUtDLElBQUwsQ0FBVUMsT0FBVixDQUFrQixLQUFsQixFQUF5QixrQ0FBekIsRUFBNkQsSUFBN0QsRUFBbUVDLE9BQU9DLE9BQVAsQ0FBZUMsVUFBbEY7QUFDQSxPQUFLSixJQUFMLENBQVVLLEtBQVYsQ0FBZ0IsU0FBaEIsRUFBMkIsOEJBQTNCO0FBQ0EsT0FBS0wsSUFBTCxDQUFVSyxLQUFWLENBQWdCLElBQWhCLEVBQXNCLGtCQUF0QjtBQUNBLE9BQUtMLElBQUwsQ0FBVUssS0FBVixDQUFnQixTQUFoQixFQUEyQixvQ0FBM0I7O0FBRUEsT0FBS0wsSUFBTCxDQUFVTSxLQUFWLENBQWdCLE9BQWhCLEVBQXlCLDBCQUF6QixFQUFxRCwyQkFBckQsRUFBa0ZKLE9BQU9LLE1BQVAsQ0FBY0MsdUJBQWhHO0FBQ0EsT0FBS1IsSUFBTCxDQUFVTSxLQUFWLENBQWdCLFFBQWhCLEVBQTBCLDJCQUExQixFQUF1RCw0QkFBdkQsRUFBcUZKLE9BQU9LLE1BQVAsQ0FBY0MsdUJBQW5HO0FBQ0EsT0FBS1IsSUFBTCxDQUFVTSxLQUFWLENBQWdCLGNBQWhCLEVBQWdDLGlDQUFoQyxFQUFtRSxrQ0FBbkUsRUFBdUdKLE9BQU9LLE1BQVAsQ0FBY0MsdUJBQXJIO0FBQ0EsT0FBS1IsSUFBTCxDQUFVTSxLQUFWLENBQWdCLFNBQWhCLEVBQTJCLDRCQUEzQixFQUF5RCw2QkFBekQsRUFBd0ZKLE9BQU9LLE1BQVAsQ0FBY0MsdUJBQXRHO0FBQ0EsT0FBS1IsSUFBTCxDQUFVTSxLQUFWLENBQWdCLE9BQWhCLEVBQXlCLDBCQUF6QixFQUFxRCwyQkFBckQsRUFBa0ZKLE9BQU9LLE1BQVAsQ0FBY0MsdUJBQWhHO0FBQ0EsT0FBS1IsSUFBTCxDQUFVTSxLQUFWLENBQWdCLFNBQWhCLEVBQTJCLDRCQUEzQixFQUF5RCw2QkFBekQsRUFBd0ZKLE9BQU9LLE1BQVAsQ0FBY0MsdUJBQXRHO0FBQ0E7O0FBRURDLFVBQVM7QUFDUixPQUFLQyxVQUFMLEdBQWtCLEtBQUtaLElBQUwsQ0FBVWEsT0FBVixDQUFrQkMsR0FBbEIsQ0FBc0JWLE9BQU9XLE1BQVAsQ0FBY0MsZ0JBQXBDLENBQWxCOztBQUdBLE9BQUtoQixJQUFMLENBQVVpQixLQUFWLENBQWdCQyxTQUFoQixHQUE0QmQsT0FBT2UsWUFBUCxDQUFvQkMsUUFBaEQ7QUFDQSxPQUFLcEIsSUFBTCxDQUFVaUIsS0FBVixDQUFnQkksbUJBQWhCLEdBQXNDakIsT0FBT2UsWUFBUCxDQUFvQkcsU0FBMUQ7QUFDQSxPQUFLdEIsSUFBTCxDQUFVaUIsS0FBVixDQUFnQk0scUJBQWhCLEdBQXdDLElBQXhDO0FBQ0EsT0FBS3ZCLElBQUwsQ0FBVWlCLEtBQVYsQ0FBZ0JPLG1CQUFoQixHQUFzQyxJQUF0QztBQUNBLE9BQUt4QixJQUFMLENBQVVpQixLQUFWLENBQWdCUSxVQUFoQjs7QUFFQSxPQUFLekIsSUFBTCxDQUFVMEIsUUFBVixDQUFtQkMsYUFBbkIsQ0FBaUNDLFdBQWpDLEdBQStDLElBQS9DO0FBQ0F4QixTQUFPeUIsTUFBUCxDQUFjQyxzQkFBZCxDQUFxQyxLQUFLOUIsSUFBTCxDQUFVK0IsTUFBL0M7O0FBRUEsT0FBSy9CLElBQUwsQ0FBVWdDLE9BQVYsQ0FBa0JDLFdBQWxCLENBQThCN0IsT0FBTzhCLE9BQVAsQ0FBZUMsTUFBN0M7O0FBRUEsT0FBS0MsS0FBTCxHQUFhLElBQUl4QyxLQUFKLENBQVUsSUFBVixDQUFiO0FBQ0E7O0FBRUR5QyxVQUFTO0FBQ1IsT0FBS0QsS0FBTCxDQUFXQyxNQUFYO0FBQ0E7QUF2Q1M7O0FBMENYQyxPQUFPQyxPQUFQLEdBQWlCekMsSUFBakIiLCJmaWxlIjoiQm9vdC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IExldmVsID0gcmVxdWlyZSgnLi9zdGF0ZXMvTGV2ZWwuanMnKTtcclxuXHJcbmNsYXNzIEJvb3Qge1xyXG5cdGNvbnN0cnVjdG9yKGdhbWUpIHtcclxuXHRcdHRoaXMuZ2FtZSA9IGdhbWU7XHJcblx0fVxyXG5cclxuXHRwcmVsb2FkKCkge1xyXG5cdFx0dGhpcy5sb2FkLnRpbGVtYXAoJ21hcCcsICcuLi9hc3NldHMvbGV2ZWxzL3Rlc3QvbGV2ZWwuanNvbicsIG51bGwsIFBoYXNlci5UaWxlbWFwLlRJTEVEX0pTT04pO1xyXG5cdFx0dGhpcy5sb2FkLmltYWdlKCd0aWxlbWFwJywgJy4uL2Fzc2V0cy9sZXZlbHMvdGlsZW1hcC5wbmcnKTtcclxuXHRcdHRoaXMubG9hZC5pbWFnZSgnYmcnLCAnLi4vYXNzZXRzL2JnLnBuZycpO1xyXG5cdFx0dGhpcy5sb2FkLmltYWdlKCdwZXJzb24xJywgJy4uL2Fzc2V0cy9fL2NoYXJhY3RlcnMvZXhhbXBsZS5wbmcnKTtcclxuXHJcblx0XHR0aGlzLmxvYWQuYXRsYXMoJ2hlYWRzJywgJ2Fzc2V0cy9hdGxhc2VzL2hlYWRzLnBuZycsICdhc3NldHMvYXRsYXNlcy9oZWFkcy5qc29uJywgUGhhc2VyLkxvYWRlci5URVhUVVJFX0FUTEFTX0pTT05fSEFTSCk7XHJcblx0XHR0aGlzLmxvYWQuYXRsYXMoJ2JvZGllcycsICdhc3NldHMvYXRsYXNlcy9ib2RpZXMucG5nJywgJ2Fzc2V0cy9hdGxhc2VzL2JvZGllcy5qc29uJywgUGhhc2VyLkxvYWRlci5URVhUVVJFX0FUTEFTX0pTT05fSEFTSCk7XHJcblx0XHR0aGlzLmxvYWQuYXRsYXMoJ2F0dGFjaFRvQm9keScsICdhc3NldHMvYXRsYXNlcy9hdHRhY2hUb0JvZHkucG5nJywgJ2Fzc2V0cy9hdGxhc2VzL2F0dGFjaFRvQm9keS5qc29uJywgUGhhc2VyLkxvYWRlci5URVhUVVJFX0FUTEFTX0pTT05fSEFTSCk7XHJcblx0XHR0aGlzLmxvYWQuYXRsYXMoJ3dlYXBvbnMnLCAnYXNzZXRzL2F0bGFzZXMvd2VhcG9ucy5wbmcnLCAnYXNzZXRzL2F0bGFzZXMvd2VhcG9ucy5qc29uJywgUGhhc2VyLkxvYWRlci5URVhUVVJFX0FUTEFTX0pTT05fSEFTSCk7XHJcblx0XHR0aGlzLmxvYWQuYXRsYXMoJ2l0ZW1zJywgJ2Fzc2V0cy9hdGxhc2VzL2l0ZW1zLnBuZycsICdhc3NldHMvYXRsYXNlcy9pdGVtcy5qc29uJywgUGhhc2VyLkxvYWRlci5URVhUVVJFX0FUTEFTX0pTT05fSEFTSCk7XHJcblx0XHR0aGlzLmxvYWQuYXRsYXMoJ2J1bGxldHMnLCAnYXNzZXRzL2F0bGFzZXMvYnVsbGV0cy5wbmcnLCAnYXNzZXRzL2F0bGFzZXMvYnVsbGV0cy5qc29uJywgUGhhc2VyLkxvYWRlci5URVhUVVJFX0FUTEFTX0pTT05fSEFTSCk7XHJcblx0fVxyXG5cclxuXHRjcmVhdGUoKSB7XHJcblx0XHR0aGlzLnBhdGhmaW5kZXIgPSB0aGlzLmdhbWUucGx1Z2lucy5hZGQoUGhhc2VyLlBsdWdpbi5QYXRoRmluZGVyUGx1Z2luKTtcclxuXHJcblxyXG5cdFx0dGhpcy5nYW1lLnNjYWxlLnNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuU0hPV19BTEw7XHJcblx0XHR0aGlzLmdhbWUuc2NhbGUuZnVsbFNjcmVlblNjYWxlTW9kZSA9IFBoYXNlci5TY2FsZU1hbmFnZXIuRVhBQ1RfRklUO1xyXG5cdFx0dGhpcy5nYW1lLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XHJcblx0XHR0aGlzLmdhbWUuc2NhbGUucGFnZUFsaWduVmVydGljYWxseSA9IHRydWU7XHJcblx0XHR0aGlzLmdhbWUuc2NhbGUuc2V0TWF4aW11bSgpO1xyXG5cclxuXHRcdHRoaXMuZ2FtZS5yZW5kZXJlci5yZW5kZXJTZXNzaW9uLnJvdW5kUGl4ZWxzID0gdHJ1ZTtcclxuXHRcdFBoYXNlci5DYW52YXMuc2V0SW1hZ2VSZW5kZXJpbmdDcmlzcCh0aGlzLmdhbWUuY2FudmFzKTtcclxuXHJcblx0XHR0aGlzLmdhbWUucGh5c2ljcy5zdGFydFN5c3RlbShQaGFzZXIuUGh5c2ljcy5BUkNBREUpO1xyXG5cclxuXHRcdHRoaXMubGV2ZWwgPSBuZXcgTGV2ZWwodGhpcyk7XHJcblx0fVxyXG5cclxuXHR1cGRhdGUoKSB7XHJcblx0XHR0aGlzLmxldmVsLnVwZGF0ZSgpO1xyXG5cdH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBCb290OyJdfQ==
},{"./states/Level.js":7}],2:[function(require,module,exports){
const Entity = require('./Entity');

class Enemy extends Entity {
	constructor(game, x, y, type = 'robot') {
		super(game, x, y, type);

		this.path = [];
	}
	update() {
		!this.is && this.finderPlayer();
		this.is = true;
	}

	finderPlayer() {
		setInterval(() => {
			let layer = this.game.level.layerMap;

			let x = layer.getTileX(this.sprite.body.x);
			let y = layer.getTileY(this.sprite.body.y);
			let pX = layer.getTileX(this.game.level.player.sprite.body.x);
			let pY = layer.getTileY(this.game.level.player.sprite.body.y);

			this.game.pathfinder.setCallbackFunction(path => {
				if (path == null) return;
				if (path[1] == null) return;

				this.path = path;
				this.moving();
			});

			this.game.pathfinder.preparePathCalculation([x, y], [pX, pY]);
			this.game.pathfinder.calculatePath();
		}, 1000);
	}

	moving() {
		let i = 0;
		setInterval(() => {
			i++;
			if (this.path[i] == null) return;
			this.fire();

			this.sprite.rotation = this.game.physics.arcade.angleToXY(this.sprite, this.path[i].x * 16, this.path[i].y * 16);
			this.game.physics.arcade.moveToXY(this.sprite, this.path[i].x * 16, this.path[i].y * 16, 10, 100);
		}, 100);
	}
}

module.exports = Enemy;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkVuZW15LmpzIl0sIm5hbWVzIjpbIkVudGl0eSIsInJlcXVpcmUiLCJFbmVteSIsImNvbnN0cnVjdG9yIiwiZ2FtZSIsIngiLCJ5IiwidHlwZSIsInBhdGgiLCJ1cGRhdGUiLCJpcyIsImZpbmRlclBsYXllciIsInNldEludGVydmFsIiwibGF5ZXIiLCJsZXZlbCIsImxheWVyTWFwIiwiZ2V0VGlsZVgiLCJzcHJpdGUiLCJib2R5IiwiZ2V0VGlsZVkiLCJwWCIsInBsYXllciIsInBZIiwicGF0aGZpbmRlciIsInNldENhbGxiYWNrRnVuY3Rpb24iLCJtb3ZpbmciLCJwcmVwYXJlUGF0aENhbGN1bGF0aW9uIiwiY2FsY3VsYXRlUGF0aCIsImkiLCJmaXJlIiwicm90YXRpb24iLCJwaHlzaWNzIiwiYXJjYWRlIiwiYW5nbGVUb1hZIiwibW92ZVRvWFkiLCJtb2R1bGUiLCJleHBvcnRzIl0sIm1hcHBpbmdzIjoiQUFBQSxNQUFNQSxTQUFTQyxRQUFRLFVBQVIsQ0FBZjs7QUFFQSxNQUFNQyxLQUFOLFNBQW9CRixNQUFwQixDQUEyQjtBQUMxQkcsYUFBWUMsSUFBWixFQUFrQkMsQ0FBbEIsRUFBcUJDLENBQXJCLEVBQXdCQyxPQUFLLE9BQTdCLEVBQXNDO0FBQ3JDLFFBQU1ILElBQU4sRUFBWUMsQ0FBWixFQUFlQyxDQUFmLEVBQWtCQyxJQUFsQjs7QUFFQSxPQUFLQyxJQUFMLEdBQVksRUFBWjtBQUVBO0FBQ0RDLFVBQVM7QUFDUixHQUFDLEtBQUtDLEVBQU4sSUFBWSxLQUFLQyxZQUFMLEVBQVo7QUFDQSxPQUFLRCxFQUFMLEdBQVUsSUFBVjtBQUNBOztBQUVEQyxnQkFBZTtBQUNkQyxjQUFZLE1BQU07QUFDakIsT0FBSUMsUUFBUSxLQUFLVCxJQUFMLENBQVVVLEtBQVYsQ0FBZ0JDLFFBQTVCOztBQUVBLE9BQUlWLElBQUlRLE1BQU1HLFFBQU4sQ0FBZSxLQUFLQyxNQUFMLENBQVlDLElBQVosQ0FBaUJiLENBQWhDLENBQVI7QUFDQSxPQUFJQyxJQUFJTyxNQUFNTSxRQUFOLENBQWUsS0FBS0YsTUFBTCxDQUFZQyxJQUFaLENBQWlCWixDQUFoQyxDQUFSO0FBQ0EsT0FBSWMsS0FBS1AsTUFBTUcsUUFBTixDQUFlLEtBQUtaLElBQUwsQ0FBVVUsS0FBVixDQUFnQk8sTUFBaEIsQ0FBdUJKLE1BQXZCLENBQThCQyxJQUE5QixDQUFtQ2IsQ0FBbEQsQ0FBVDtBQUNBLE9BQUlpQixLQUFLVCxNQUFNTSxRQUFOLENBQWUsS0FBS2YsSUFBTCxDQUFVVSxLQUFWLENBQWdCTyxNQUFoQixDQUF1QkosTUFBdkIsQ0FBOEJDLElBQTlCLENBQW1DWixDQUFsRCxDQUFUOztBQUVBLFFBQUtGLElBQUwsQ0FBVW1CLFVBQVYsQ0FBcUJDLG1CQUFyQixDQUEwQ2hCLElBQUQsSUFBVTtBQUNsRCxRQUFHQSxRQUFRLElBQVgsRUFBaUI7QUFDakIsUUFBR0EsS0FBSyxDQUFMLEtBQVcsSUFBZCxFQUFvQjs7QUFFcEIsU0FBS0EsSUFBTCxHQUFZQSxJQUFaO0FBQ0EsU0FBS2lCLE1BQUw7QUFDQSxJQU5EOztBQVFBLFFBQUtyQixJQUFMLENBQVVtQixVQUFWLENBQXFCRyxzQkFBckIsQ0FBNEMsQ0FBQ3JCLENBQUQsRUFBSUMsQ0FBSixDQUE1QyxFQUFvRCxDQUFDYyxFQUFELEVBQUtFLEVBQUwsQ0FBcEQ7QUFDQSxRQUFLbEIsSUFBTCxDQUFVbUIsVUFBVixDQUFxQkksYUFBckI7QUFDQSxHQWxCRCxFQWtCRyxJQWxCSDtBQW1CQTs7QUFFREYsVUFBUztBQUNSLE1BQUlHLElBQUksQ0FBUjtBQUNBaEIsY0FBWSxNQUFNO0FBQ2pCZ0I7QUFDQSxPQUFHLEtBQUtwQixJQUFMLENBQVVvQixDQUFWLEtBQWdCLElBQW5CLEVBQXlCO0FBQ3pCLFFBQUtDLElBQUw7O0FBRUEsUUFBS1osTUFBTCxDQUFZYSxRQUFaLEdBQXVCLEtBQUsxQixJQUFMLENBQVUyQixPQUFWLENBQWtCQyxNQUFsQixDQUF5QkMsU0FBekIsQ0FBbUMsS0FBS2hCLE1BQXhDLEVBQWdELEtBQUtULElBQUwsQ0FBVW9CLENBQVYsRUFBYXZCLENBQWIsR0FBZSxFQUEvRCxFQUFtRSxLQUFLRyxJQUFMLENBQVVvQixDQUFWLEVBQWF0QixDQUFiLEdBQWUsRUFBbEYsQ0FBdkI7QUFDQSxRQUFLRixJQUFMLENBQVUyQixPQUFWLENBQWtCQyxNQUFsQixDQUF5QkUsUUFBekIsQ0FBa0MsS0FBS2pCLE1BQXZDLEVBQStDLEtBQUtULElBQUwsQ0FBVW9CLENBQVYsRUFBYXZCLENBQWIsR0FBZSxFQUE5RCxFQUFrRSxLQUFLRyxJQUFMLENBQVVvQixDQUFWLEVBQWF0QixDQUFiLEdBQWUsRUFBakYsRUFBcUYsRUFBckYsRUFBeUYsR0FBekY7QUFDQSxHQVBELEVBT0csR0FQSDtBQVFBO0FBNUN5Qjs7QUErQzNCNkIsT0FBT0MsT0FBUCxHQUFpQmxDLEtBQWpCIiwiZmlsZSI6IkVuZW15LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRW50aXR5ID0gcmVxdWlyZSgnLi9FbnRpdHknKTtcclxuXHJcbmNsYXNzIEVuZW15IGV4dGVuZHMgRW50aXR5IHtcclxuXHRjb25zdHJ1Y3RvcihnYW1lLCB4LCB5LCB0eXBlPSdyb2JvdCcpIHtcclxuXHRcdHN1cGVyKGdhbWUsIHgsIHksIHR5cGUpO1xyXG5cclxuXHRcdHRoaXMucGF0aCA9IFtdO1xyXG5cclxuXHR9XHJcblx0dXBkYXRlKCkge1xyXG5cdFx0IXRoaXMuaXMgJiYgdGhpcy5maW5kZXJQbGF5ZXIoKTtcclxuXHRcdHRoaXMuaXMgPSB0cnVlO1xyXG5cdH1cclxuXHJcblx0ZmluZGVyUGxheWVyKCkge1xyXG5cdFx0c2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHRsZXQgbGF5ZXIgPSB0aGlzLmdhbWUubGV2ZWwubGF5ZXJNYXA7XHJcblxyXG5cdFx0XHRsZXQgeCA9IGxheWVyLmdldFRpbGVYKHRoaXMuc3ByaXRlLmJvZHkueCk7XHJcblx0XHRcdGxldCB5ID0gbGF5ZXIuZ2V0VGlsZVkodGhpcy5zcHJpdGUuYm9keS55KTtcclxuXHRcdFx0bGV0IHBYID0gbGF5ZXIuZ2V0VGlsZVgodGhpcy5nYW1lLmxldmVsLnBsYXllci5zcHJpdGUuYm9keS54KTtcclxuXHRcdFx0bGV0IHBZID0gbGF5ZXIuZ2V0VGlsZVkodGhpcy5nYW1lLmxldmVsLnBsYXllci5zcHJpdGUuYm9keS55KTtcclxuXHJcblx0XHRcdHRoaXMuZ2FtZS5wYXRoZmluZGVyLnNldENhbGxiYWNrRnVuY3Rpb24oKHBhdGgpID0+IHtcclxuXHRcdFx0XHRpZihwYXRoID09IG51bGwpIHJldHVybjtcclxuXHRcdFx0XHRpZihwYXRoWzFdID09IG51bGwpIHJldHVybjtcclxuXHJcblx0XHRcdFx0dGhpcy5wYXRoID0gcGF0aDtcclxuXHRcdFx0XHR0aGlzLm1vdmluZygpO1xyXG5cdFx0XHR9KTtcclxuXHJcblx0XHRcdHRoaXMuZ2FtZS5wYXRoZmluZGVyLnByZXBhcmVQYXRoQ2FsY3VsYXRpb24oW3gsIHldLCBbcFgsIHBZXSk7XHJcblx0XHRcdHRoaXMuZ2FtZS5wYXRoZmluZGVyLmNhbGN1bGF0ZVBhdGgoKTtcclxuXHRcdH0sIDEwMDApO1xyXG5cdH1cclxuXHJcblx0bW92aW5nKCkge1xyXG5cdFx0bGV0IGkgPSAwO1xyXG5cdFx0c2V0SW50ZXJ2YWwoKCkgPT4ge1xyXG5cdFx0XHRpKys7XHJcblx0XHRcdGlmKHRoaXMucGF0aFtpXSA9PSBudWxsKSByZXR1cm47XHJcblx0XHRcdHRoaXMuZmlyZSgpO1xyXG5cclxuXHRcdFx0dGhpcy5zcHJpdGUucm90YXRpb24gPSB0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUuYW5nbGVUb1hZKHRoaXMuc3ByaXRlLCB0aGlzLnBhdGhbaV0ueCoxNiwgdGhpcy5wYXRoW2ldLnkqMTYpO1xyXG5cdFx0XHR0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUubW92ZVRvWFkodGhpcy5zcHJpdGUsIHRoaXMucGF0aFtpXS54KjE2LCB0aGlzLnBhdGhbaV0ueSoxNiwgMTAsIDEwMCk7XHJcblx0XHR9LCAxMDApO1xyXG5cdH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFbmVteTsiXX0=
},{"./Entity":3}],3:[function(require,module,exports){
const entities = require('./entities.json');

class Entity {
	constructor(game, x, y, type) {
		this.type = type;
		this.game = game;

		this.x = x != null ? x : 0;
		this.y = y != null ? y : 0;

		this._entity = entities[type];

		this.hp = this._entity.hp != null ? this._entity.hp : 10;
		this.jumping = this._entity.jump != null ? this._entity.jump : 2;
		this.speed = this._entity.speed != null ? this._entity.speed : 100;
		this.isJumping = false;
		this.isDead = false;

		this.headId = this._entity.head != null ? this._entity.head : 0;
		this.bodyId = this._entity.body != null ? this._entity.body : 0;
		this.weaponId = this._entity.weapon != null ? this._entity.weapon : 0;

		this._createPhaserObjects();
	}

	_createPhaserObjects() {
		this.sprite = this.game.add.sprite(this.x, this.y, 'bodies', this.bodyId);
		this.sprite.anchor.set(0.5);
		this.sprite.smoothed = false;

		this.head = this.game.make.sprite(-12, -7, 'heads', this.headId);
		this.head.smoothed = false;
		this.sprite.addChild(this.head);

		this.attachToBody = this.game.make.sprite(3.5, -4, 'attachToBody', this.weaponId);
		this.attachToBody.smoothed = false;
		this.sprite.addChild(this.attachToBody);

		this.weapon = this.game.add.weapon(10, 'bullets');
		this.weapon.setBulletFrames(this.weaponId, this.weaponId, true);
		this.weapon.bulletKillType = Phaser.Weapon.KILL_WORLD_BOUNDS;
		this.weapon.bulletSpeed = 400;
		this.weapon.fireRate = 50;
		this.weapon.trackSprite(this.sprite, 16, 4, true);

		this.game.physics.arcade.enable(this.sprite);
		this.sprite.body.drag.set(150);
		this.sprite.body.maxVelocity.set(100);
		this.sprite.syncBounds = true;
	}

	fire() {
		let bullet = this.weapon.fire();

		if (bullet) {
			this.sprite.body.angularVelocity = -400;
			this.game.physics.arcade.accelerationFromRotation(this.sprite.rotation, 300, this.sprite.body.acceleration);
			bullet.smoothed = false;
			bullet.scale.setTo(this.sprite.scale.x / 2, this.sprite.scale.y / 2);
			bullet.body.updateBounds();
		}
	}

	jump(power) {
		this.isJumping = true;

		let tweenUp = this.game.add.tween(this.sprite.scale).to({
			x: power,
			y: power
		}, 300, Phaser.Easing.Quadratic.Out, true);

		tweenUp.onComplete.add(() => {
			this.sprite.body.updateBounds();

			let tweenDown = this.game.add.tween(this.sprite.scale).to({
				x: 1,
				y: 1
			}, 300, Phaser.Easing.Quintic.In, true);

			tweenDown.onComplete.add(() => {
				this.isJumping = false;
				this.weapon.trackSprite(this.sprite, 16 * this.sprite.scale.x, 4 * this.sprite.scale.y, true);
			}, this);
		}, this);
	}

	fallDead() {
		this.isDead = true;
		this.game.add.tween(this.sprite.scale).to({
			x: 0,
			y: 0
		}, 300, Phaser.Easing.Quadratic.In, true);
	}
}

module.exports = Entity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkVudGl0eS5qcyJdLCJuYW1lcyI6WyJlbnRpdGllcyIsInJlcXVpcmUiLCJFbnRpdHkiLCJjb25zdHJ1Y3RvciIsImdhbWUiLCJ4IiwieSIsInR5cGUiLCJfZW50aXR5IiwiaHAiLCJqdW1waW5nIiwianVtcCIsInNwZWVkIiwiaXNKdW1waW5nIiwiaXNEZWFkIiwiaGVhZElkIiwiaGVhZCIsImJvZHlJZCIsImJvZHkiLCJ3ZWFwb25JZCIsIndlYXBvbiIsIl9jcmVhdGVQaGFzZXJPYmplY3RzIiwic3ByaXRlIiwiYWRkIiwiYW5jaG9yIiwic2V0Iiwic21vb3RoZWQiLCJtYWtlIiwiYWRkQ2hpbGQiLCJhdHRhY2hUb0JvZHkiLCJzZXRCdWxsZXRGcmFtZXMiLCJidWxsZXRLaWxsVHlwZSIsIlBoYXNlciIsIldlYXBvbiIsIktJTExfV09STERfQk9VTkRTIiwiYnVsbGV0U3BlZWQiLCJmaXJlUmF0ZSIsInRyYWNrU3ByaXRlIiwicGh5c2ljcyIsImFyY2FkZSIsImVuYWJsZSIsImRyYWciLCJtYXhWZWxvY2l0eSIsInN5bmNCb3VuZHMiLCJmaXJlIiwiYnVsbGV0IiwiYW5ndWxhclZlbG9jaXR5IiwiYWNjZWxlcmF0aW9uRnJvbVJvdGF0aW9uIiwicm90YXRpb24iLCJhY2NlbGVyYXRpb24iLCJzY2FsZSIsInNldFRvIiwidXBkYXRlQm91bmRzIiwicG93ZXIiLCJ0d2VlblVwIiwidHdlZW4iLCJ0byIsIkVhc2luZyIsIlF1YWRyYXRpYyIsIk91dCIsIm9uQ29tcGxldGUiLCJ0d2VlbkRvd24iLCJRdWludGljIiwiSW4iLCJmYWxsRGVhZCIsIm1vZHVsZSIsImV4cG9ydHMiXSwibWFwcGluZ3MiOiJBQUFBLE1BQU1BLFdBQVdDLFFBQVEsaUJBQVIsQ0FBakI7O0FBRUEsTUFBTUMsTUFBTixDQUFhO0FBQ1pDLGFBQVlDLElBQVosRUFBa0JDLENBQWxCLEVBQXFCQyxDQUFyQixFQUF3QkMsSUFBeEIsRUFBOEI7QUFDN0IsT0FBS0EsSUFBTCxHQUFZQSxJQUFa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TUFBRyxDQURzQztBQUV6Q0MsTUFBRztBQUZzQyxHQUExQyxFQUdHLEdBSEgsRUFHUTBCLE9BQU95QixNQUFQLENBQWNDLFNBQWQsQ0FBd0JLLEVBSGhDLEVBR29DLElBSHBDO0FBSUE7QUE1Rlc7O0FBK0ZiRSxPQUFPQyxPQUFQLEdBQWlCaEUsTUFBakIiLCJmaWxlIjoiRW50aXR5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZW50aXRpZXMgPSByZXF1aXJlKCcuL2VudGl0aWVzLmpzb24nKTtcclxuXHJcbmNsYXNzIEVudGl0eSB7XHJcblx0Y29uc3RydWN0b3IoZ2FtZSwgeCwgeSwgdHlwZSkge1xyXG5cdFx0dGhpcy50eXBlID0gdHlwZTtcclxuXHRcdHRoaXMuZ2FtZSA9IGdhbWU7XHJcblxyXG5cdFx0dGhpcy54ID0geCAhPSBudWxsID8geCA6IDA7XHJcblx0XHR0aGlzLnkgPSB5ICE9IG51bGwgPyB5IDogMDtcclxuXHJcblx0XHR0aGlzLl9lbnRpdHkgPSBlbnRpdGllc1t0eXBlXTtcclxuXHJcblx0XHR0aGlzLmhwID0gdGhpcy5fZW50aXR5LmhwICE9IG51bGwgPyB0aGlzLl9lbnRpdHkuaHAgOiAxMDtcclxuXHRcdHRoaXMuanVtcGluZyA9IHRoaXMuX2VudGl0eS5qdW1wICE9IG51bGwgPyB0aGlzLl9lbnRpdHkuanVtcCA6IDI7XHJcblx0XHR0aGlzLnNwZWVkID0gdGhpcy5fZW50aXR5LnNwZWVkICE9IG51bGwgPyB0aGlzLl9lbnRpdHkuc3BlZWQgOiAxMDA7XHJcblx0XHR0aGlzLmlzSnVtcGluZyA9IGZhbHNlO1xyXG5cdFx0dGhpcy5pc0RlYWQgPSBmYWxzZTtcclxuXHJcblx0XHR0aGlzLmhlYWRJZCA9IHRoaXMuX2VudGl0eS5oZWFkICE9IG51bGwgPyB0aGlzLl9lbnRpdHkuaGVhZCA6IDA7XHJcblx0XHR0aGlzLmJvZHlJZCA9IHRoaXMuX2VudGl0eS5ib2R5ICE9IG51bGwgPyB0aGlzLl9lbnRpdHkuYm9keSA6IDA7XHJcblx0XHR0aGlzLndlYXBvbklkID0gdGhpcy5fZW50aXR5LndlYXBvbiAhPSBudWxsID8gdGhpcy5fZW50aXR5LndlYXBvbiA6IDA7XHJcblxyXG5cdFx0dGhpcy5fY3JlYXRlUGhhc2VyT2JqZWN0cygpO1xyXG5cdH1cclxuXHJcblx0X2NyZWF0ZVBoYXNlck9iamVjdHMoKSB7XHJcblx0XHR0aGlzLnNwcml0ZSA9IHRoaXMuZ2FtZS5hZGQuc3ByaXRlKHRoaXMueCwgdGhpcy55LCAnYm9kaWVzJywgdGhpcy5ib2R5SWQpO1xyXG5cdFx0dGhpcy5zcHJpdGUuYW5jaG9yLnNldCgwLjUpO1xyXG5cdFx0dGhpcy5zcHJpdGUuc21vb3RoZWQgPSBmYWxzZTtcclxuXHJcblx0XHR0aGlzLmhlYWQgPSB0aGlzLmdhbWUubWFrZS5zcHJpdGUoLTEyLCAtNywgJ2hlYWRzJywgdGhpcy5oZWFkSWQpO1xyXG5cdFx0dGhpcy5oZWFkLnNtb290aGVkID0gZmFsc2U7XHJcblx0XHR0aGlzLnNwcml0ZS5hZGRDaGlsZCh0aGlzLmhlYWQpO1xyXG5cclxuXHRcdHRoaXMuYXR0YWNoVG9Cb2R5ID0gdGhpcy5nYW1lLm1ha2Uuc3ByaXRlKDMuNSwgLTQsICdhdHRhY2hUb0JvZHknLCB0aGlzLndlYXBvbklkKTtcclxuXHRcdHRoaXMuYXR0YWNoVG9Cb2R5LnNtb290aGVkID0gZmFsc2U7XHJcblx0XHR0aGlzLnNwcml0ZS5hZGRDaGlsZCh0aGlzLmF0dGFjaFRvQm9keSk7XHRcclxuXHJcblx0XHR0aGlzLndlYXBvbiA9IHRoaXMuZ2FtZS5hZGQud2VhcG9uKDEwLCAnYnVsbGV0cycpO1xyXG5cdFx0dGhpcy53ZWFwb24uc2V0QnVsbGV0RnJhbWVzKHRoaXMud2VhcG9uSWQsIHRoaXMud2VhcG9uSWQsIHRydWUpO1xyXG5cdFx0dGhpcy53ZWFwb24uYnVsbGV0S2lsbFR5cGUgPSBQaGFzZXIuV2VhcG9uLktJTExfV09STERfQk9VTkRTO1xyXG5cdFx0dGhpcy53ZWFwb24uYnVsbGV0U3BlZWQgPSA0MDA7XHJcblx0XHR0aGlzLndlYXBvbi5maXJlUmF0ZSA9IDUwO1xyXG5cdFx0dGhpcy53ZWFwb24udHJhY2tTcHJpdGUodGhpcy5zcHJpdGUsIDE2LCA0LCB0cnVlKTtcclxuXHRcdFxyXG5cdFx0dGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLmVuYWJsZSh0aGlzLnNwcml0ZSk7XHJcblx0XHR0aGlzLnNwcml0ZS5ib2R5LmRyYWcuc2V0KDE1MCk7XHJcblx0XHR0aGlzLnNwcml0ZS5ib2R5Lm1heFZlbG9jaXR5LnNldCgxMDApO1xyXG5cdFx0dGhpcy5zcHJpdGUuc3luY0JvdW5kcyA9IHRydWU7XHJcblx0fVxyXG5cclxuXHRmaXJlKCkge1xyXG5cdFx0bGV0IGJ1bGxldCA9IHRoaXMud2VhcG9uLmZpcmUoKTtcclxuXHJcblx0XHRpZihidWxsZXQpIHtcclxuXHRcdFx0dGhpcy5zcHJpdGUuYm9keS5hbmd1bGFyVmVsb2NpdHkgPSAtNDAwO1xyXG5cdFx0XHR0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUuYWNjZWxlcmF0aW9uRnJvbVJvdGF0aW9uKHRoaXMuc3ByaXRlLnJvdGF0aW9uLCAzMDAsIHRoaXMuc3ByaXRlLmJvZHkuYWNjZWxlcmF0aW9uKTtcclxuXHRcdFx0YnVsbGV0LnNtb290aGVkID0gZmFsc2U7XHJcblx0XHRcdGJ1bGxldC5zY2FsZS5zZXRUbyh0aGlzLnNwcml0ZS5zY2FsZS54LzIsIHRoaXMuc3ByaXRlLnNjYWxlLnkvMik7XHJcblx0XHRcdGJ1bGxldC5ib2R5LnVwZGF0ZUJvdW5kcygpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0anVtcChwb3dlcikge1xyXG5cdFx0dGhpcy5pc0p1bXBpbmcgPSB0cnVlO1xyXG5cclxuXHRcdGxldCB0d2VlblVwID0gdGhpcy5nYW1lLmFkZC50d2Vlbih0aGlzLnNwcml0ZS5zY2FsZSkudG8oe1xyXG5cdFx0XHR4OiBwb3dlciwgXHJcblx0XHRcdHk6IHBvd2VyXHJcblx0XHR9LCAzMDAsIFBoYXNlci5FYXNpbmcuUXVhZHJhdGljLk91dCwgdHJ1ZSk7XHJcblxyXG5cdFx0dHdlZW5VcC5vbkNvbXBsZXRlLmFkZCgoKSA9PiB7XHJcblx0XHRcdHRoaXMuc3ByaXRlLmJvZHkudXBkYXRlQm91bmRzKCk7XHJcblxyXG5cdFx0XHRsZXQgdHdlZW5Eb3duID0gdGhpcy5nYW1lLmFkZC50d2Vlbih0aGlzLnNwcml0ZS5zY2FsZSkudG8oe1xyXG5cdFx0XHRcdHg6IDEsXHJcblx0XHRcdFx0eTogMVxyXG5cdFx0XHR9LCAzMDAsIFBoYXNlci5FYXNpbmcuUXVpbnRpYy5JbiwgdHJ1ZSk7XHJcblxyXG5cclxuXHRcdFx0dHdlZW5Eb3duLm9uQ29tcGxldGUuYWRkKCgpID0+IHtcclxuXHRcdFx0XHR0aGlzLmlzSnVtcGluZyA9IGZhbHNlO1xyXG5cdFx0XHRcdHRoaXMud2VhcG9uLnRyYWNrU3ByaXRlKHRoaXMuc3ByaXRlLCAxNip0aGlzLnNwcml0ZS5zY2FsZS54LCA0KnRoaXMuc3ByaXRlLnNjYWxlLnksIHRydWUpO1xyXG5cdFx0XHR9LCB0aGlzKTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0fSwgdGhpcyk7XHJcblx0fVxyXG5cclxuXHRmYWxsRGVhZCgpIHtcclxuXHRcdHRoaXMuaXNEZWFkID0gdHJ1ZTtcclxuXHRcdHRoaXMuZ2FtZS5hZGQudHdlZW4odGhpcy5zcHJpdGUuc2NhbGUpLnRvKHtcclxuXHRcdFx0eDogMCwgXHJcblx0XHRcdHk6IDBcclxuXHRcdH0sIDMwMCwgUGhhc2VyLkVhc2luZy5RdWFkcmF0aWMuSW4sIHRydWUpO1xyXG5cdH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBFbnRpdHk7Il19
},{"./entities.json":5}],4:[function(require,module,exports){
const Entity = require('./Entity.js');

class Player extends Entity {
	constructor(game, x, y) {
		super(game, x, y, 'player');

		this.game.camera.follow(this.sprite, Phaser.Camera.FOLLOW_LOCKON, 0.1, 0.1);

		this.cursors = this.game.input.keyboard.createCursorKeys();
		this.jumpButton = this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);
		this.fireButton = this.game.input.keyboard.addKey(Phaser.Keyboard.Z);
	}

	update() {
		if (this.isDead) return;

		this.game.physics.arcade.collide(this.sprite, this.game.level.layerMap);
		if (!this.isJumping) {
			for (let i = 0; i < this.game.level.deadRects.length; i++) {
				let rect = this.game.level.deadRects[i];

				let pl = new Phaser.Rectangle(this.sprite.body.x, this.sprite.body.y, this.sprite.body.width, this.sprite.body.height);
				if (Phaser.Rectangle.intersects(rect, pl)) {
					this.sprite.body.acceleration.set(0);
					this.fallDead();
					return;
				}
			}
		}
		this.weapon.forEach(bullet => {
			this.game.level.enemies.forEach(enemy => {
				this.game.physics.arcade.overlap(bullet, enemy, (b, e) => {
					b.kill();e.kill();
				}, null, this);
			});
		});

		if (this.isJumping) this.weapon.trackSprite(this.sprite, 16 * this.sprite.scale.x, 4 * this.sprite.scale.y, true);

		if (this.cursors.up.isDown) this.game.physics.arcade.accelerationFromRotation(this.sprite.rotation, 300, this.sprite.body.acceleration);else this.sprite.body.acceleration.set(0);

		if (this.cursors.left.isDown) this.sprite.body.angularVelocity = -300;else if (this.cursors.right.isDown) this.sprite.body.angularVelocity = 300;else this.sprite.body.angularVelocity = 0;

		if (this.fireButton.isDown) this.fire();

		if (this.jumpButton.isDown && !this.isJumping) {
			this.jump(this.jumping);
		}
	}
}

module.exports = Player;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlBsYXllci5qcyJdLCJuYW1lcyI6WyJFbnRpdHkiLCJyZXF1aXJlIiwiUGxheWVyIiwiY29uc3RydWN0b3IiLCJnYW1lIiwieCIsInkiLCJjYW1lcmEiLCJmb2xsb3ciLCJzcHJpdGUiLCJQaGFzZXIiLCJDYW1lcmEiLCJGT0xMT1dfTE9DS09OIiwiY3Vyc29ycyIsImlucHV0Iiwia2V5Ym9hcmQiLCJjcmVhdGVDdXJzb3JLZXlzIiwianVtcEJ1dHRvbiIsImFkZEtleSIsIktleWJvYXJkIiwiU1BBQ0VCQVIiLCJmaXJlQnV0dG9uIiwiWiIsInVwZGF0ZSIsImlzRGVhZCIsInBoeXNpY3MiLCJhcmNhZGUiLCJjb2xsaWRlIiwibGV2ZWwiLCJsYXllck1hcCIsImlzSnVtcGluZyIsImkiLCJkZWFkUmVjdHMiLCJsZW5ndGgiLCJyZWN0IiwicGwiLCJSZWN0YW5nbGUiLCJib2R5Iiwid2lkdGgiLCJoZWlnaHQiLCJpbnRlcnNlY3RzIiwiYWNjZWxlcmF0aW9uIiwic2V0IiwiZmFsbERlYWQiLCJ3ZWFwb24iLCJmb3JFYWNoIiwiYnVsbGV0IiwiZW5lbWllcyIsImVuZW15Iiwib3ZlcmxhcCIsImIiLCJlIiwia2lsbCIsInRyYWNrU3ByaXRlIiwic2NhbGUiLCJ1cCIsImlzRG93biIsImFjY2VsZXJhdGlvbkZyb21Sb3RhdGlvbiIsInJvdGF0aW9uIiwibGVmdCIsImFuZ3VsYXJWZWxvY2l0eSIsInJpZ2h0IiwiZmlyZSIsImp1bXAiLCJqdW1waW5nIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsU0FBU0MsUUFBUSxhQUFSLENBQWY7O0FBRUEsTUFBTUMsTUFBTixTQUFxQkYsTUFBckIsQ0FBNEI7QUFDM0JHLGFBQVlDLElBQVosRUFBa0JDLENBQWxCLEVBQXFCQyxDQUFyQixFQUF3QjtBQUN2QixRQUFNRixJQUFOLEVBQVlDLENBQVosRUFBZUMsQ0FBZixFQUFrQixRQUFsQjs7QUFFQSxPQUFLRixJQUFMLENBQVVHLE1BQVYs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TUFBTCxDQUFZNEIsSUFBWixDQUFpQkksWUFBOUYsRUFERCxLQUdLLEtBQUtoQyxNQUFMLENBQVk0QixJQUFaLENBQWlCSSxZQUFqQixDQUE4QkMsR0FBOUIsQ0FBa0MsQ0FBbEM7O0FBRUwsTUFBRyxLQUFLN0IsT0FBTCxDQUFhOEMsSUFBYixDQUFrQkgsTUFBckIsRUFDQyxLQUFLL0MsTUFBTCxDQUFZNEIsSUFBWixDQUFpQnVCLGVBQWpCLEdBQW1DLENBQUMsR0FBcEMsQ0FERCxLQUdLLElBQUcsS0FBSy9DLE9BQUwsQ0FBYWdELEtBQWIsQ0FBbUJMLE1BQXRCLEVBQ0osS0FBSy9DLE1BQUwsQ0FBWTRCLElBQVosQ0FBaUJ1QixlQUFqQixHQUFtQyxHQUFuQyxDQURJLEtBR0EsS0FBS25ELE1BQUwsQ0FBWTRCLElBQVosQ0FBaUJ1QixlQUFqQixHQUFtQyxDQUFuQzs7QUFFTCxNQUFHLEtBQUt2QyxVQUFMLENBQWdCbUMsTUFBbkIsRUFDQyxLQUFLTSxJQUFMOztBQUVELE1BQUcsS0FBSzdDLFVBQUwsQ0FBZ0J1QyxNQUFoQixJQUEwQixDQUFDLEtBQUsxQixTQUFuQyxFQUE4QztBQUM3QyxRQUFLaUMsSUFBTCxDQUFVLEtBQUtDLE9BQWY7QUFDQTtBQUVEO0FBeEQwQjs7QUEyRDVCQyxPQUFPQyxPQUFQLEdBQWlCaEUsTUFBakIiLCJmaWxlIjoiUGxheWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgRW50aXR5ID0gcmVxdWlyZSgnLi9FbnRpdHkuanMnKTtcclxuXHJcbmNsYXNzIFBsYXllciBleHRlbmRzIEVudGl0eSB7XHJcblx0Y29uc3RydWN0b3IoZ2FtZSwgeCwgeSkge1xyXG5cdFx0c3VwZXIoZ2FtZSwgeCwgeSwgJ3BsYXllcicpO1xyXG5cclxuXHRcdHRoaXMuZ2FtZS5jYW1lcmEuZm9sbG93KHRoaXMuc3ByaXRlLCBQaGFzZXIuQ2FtZXJhLkZPTExPV19MT0NLT04gLCAwLjEsIDAuMSk7XHJcblxyXG5cdFx0dGhpcy5jdXJzb3JzID0gdGhpcy5nYW1lLmlucHV0LmtleWJvYXJkLmNyZWF0ZUN1cnNvcktleXMoKTtcclxuXHRcdHRoaXMuanVtcEJ1dHRvbiA9IHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLktleWJvYXJkLlNQQUNFQkFSKTtcclxuXHRcdHRoaXMuZmlyZUJ1dHRvbiA9IHRoaXMuZ2FtZS5pbnB1dC5rZXlib2FyZC5hZGRLZXkoUGhhc2VyLktleWJvYXJkLlopO1xyXG5cdH1cclxuXHJcblx0dXBkYXRlKCkge1xyXG5cdFx0aWYodGhpcy5pc0RlYWQpIHJldHVybjtcclxuXHJcblx0XHR0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUuY29sbGlkZSh0aGlzLnNwcml0ZSwgdGhpcy5nYW1lLmxldmVsLmxheWVyTWFwKTtcclxuXHRcdGlmKCF0aGlzLmlzSnVtcGluZykge1xyXG5cdFx0XHRmb3IobGV0IGkgPSAwOyBpIDwgdGhpcy5nYW1lLmxldmVsLmRlYWRSZWN0cy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdGxldCByZWN0ID0gdGhpcy5nYW1lLmxldmVsLmRlYWRSZWN0c1tpXTtcclxuXHJcblx0XHRcdFx0bGV0IHBsID0gbmV3IFBoYXNlci5SZWN0YW5nbGUodGhpcy5zcHJpdGUuYm9keS54LCB0aGlzLnNwcml0ZS5ib2R5LnksIHRoaXMuc3ByaXRlLmJvZHkud2lkdGgsIHRoaXMuc3ByaXRlLmJvZHkuaGVpZ2h0KTtcclxuXHRcdFx0XHRpZihQaGFzZXIuUmVjdGFuZ2xlLmludGVyc2VjdHMocmVjdCwgcGwpKSB7XHJcblx0XHRcdFx0XHR0aGlzLnNwcml0ZS5ib2R5LmFjY2VsZXJhdGlvbi5zZXQoMCk7XHJcblx0XHRcdFx0XHR0aGlzLmZhbGxEZWFkKCk7XHJcblx0XHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHR0aGlzLndlYXBvbi5mb3JFYWNoKChidWxsZXQpID0+IHtcclxuXHRcdFx0dGhpcy5nYW1lLmxldmVsLmVuZW1pZXMuZm9yRWFjaCgoZW5lbXkpID0+IHtcclxuXHRcdFx0XHR0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUub3ZlcmxhcChidWxsZXQsIGVuZW15LCAoYiwgZSkgPT4ge2Iua2lsbCgpOyBlLmtpbGwoKX0sIG51bGwsIHRoaXMpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH0pO1xyXG5cclxuXHRcdGlmKHRoaXMuaXNKdW1waW5nKVxyXG5cdFx0XHR0aGlzLndlYXBvbi50cmFja1Nwcml0ZSh0aGlzLnNwcml0ZSwgMTYqdGhpcy5zcHJpdGUuc2NhbGUueCwgNCp0aGlzLnNwcml0ZS5zY2FsZS55LCB0cnVlKTtcclxuXHJcblx0XHRpZih0aGlzLmN1cnNvcnMudXAuaXNEb3duKVxyXG5cdFx0XHR0aGlzLmdhbWUucGh5c2ljcy5hcmNhZGUuYWNjZWxlcmF0aW9uRnJvbVJvdGF0aW9uKHRoaXMuc3ByaXRlLnJvdGF0aW9uLCAzMDAsIHRoaXMuc3ByaXRlLmJvZHkuYWNjZWxlcmF0aW9uKTtcclxuXHJcblx0XHRlbHNlIHRoaXMuc3ByaXRlLmJvZHkuYWNjZWxlcmF0aW9uLnNldCgwKTtcclxuXHJcblx0XHRpZih0aGlzLmN1cnNvcnMubGVmdC5pc0Rvd24pXHJcblx0XHRcdHRoaXMuc3ByaXRlLmJvZHkuYW5ndWxhclZlbG9jaXR5ID0gLTMwMDtcclxuXHJcblx0XHRlbHNlIGlmKHRoaXMuY3Vyc29ycy5yaWdodC5pc0Rvd24pXHJcblx0XHRcdHRoaXMuc3ByaXRlLmJvZHkuYW5ndWxhclZlbG9jaXR5ID0gMzAwO1xyXG5cclxuXHRcdGVsc2UgdGhpcy5zcHJpdGUuYm9keS5hbmd1bGFyVmVsb2NpdHkgPSAwO1xyXG5cclxuXHRcdGlmKHRoaXMuZmlyZUJ1dHRvbi5pc0Rvd24pXHJcblx0XHRcdHRoaXMuZmlyZSgpO1xyXG5cclxuXHRcdGlmKHRoaXMuanVtcEJ1dHRvbi5pc0Rvd24gJiYgIXRoaXMuaXNKdW1waW5nKSB7XHJcblx0XHRcdHRoaXMuanVtcCh0aGlzLmp1bXBpbmcpO1xyXG5cdFx0fVxyXG5cclxuXHR9XHJcbn1cclxuXHRcdFx0XHJcbm1vZHVsZS5leHBvcnRzID0gUGxheWVyOyJdfQ==
},{"./Entity.js":3}],5:[function(require,module,exports){
module.exports={
	"player": {
		"hp": 10,
		"jump": 3,
		"speed": 100,

		"head": 5,
		"body": 3,
		"weapon": 5
	},
	"robot": {
		"hp": 10,
		"jump": 3,
		"speed": 100,

		"head": 7,
		"body": 1,
		"weapon": 8
	},
	"robot2": {
		"hp": 10,
		"jump": 3,
		"speed": 100,

		"head": 10,
		"body": 3,
		"weapon": 2
	},
	"robot3": {
		"hp": 10,
		"jump": 3,
		"speed": 100,

		"head": 13,
		"body": 3,
		"weapon": 5
	}
}
},{}],6:[function(require,module,exports){
var Boot = require('./Boot.js');

var game = new Phaser.Game(480, 320, Phaser.AUTO, 'ShooterBlink');
game.state.add('Boot', Boot, true);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbIkJvb3QiLCJyZXF1aXJlIiwiZ2FtZSIsIlBoYXNlciIsIkdhbWUiLCJBVVRPIiwic3RhdGUiLCJhZGQiXSwibWFwcGluZ3MiOiJBQUFBLElBQUlBLE9BQU9DLFFBQVEsV0FBUixDQUFYOztBQUVBLElBQUlDLE9BQU8sSUFBSUMsT0FBT0MsSUFBWCxDQUFnQixHQUFoQixFQUFxQixHQUFyQixFQUEwQkQsT0FBT0UsSUFBakMsRUFBdUMsY0FBdkMsQ0FBWDtBQUNBSCxLQUFLSSxLQUFMLENBQVdDLEdBQVgsQ0FBZSxNQUFmLEVBQXVCUCxJQUF2QixFQUE2QixJQUE3QiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBCb290ID0gcmVxdWlyZSgnLi9Cb290LmpzJyk7XHJcblxyXG52YXIgZ2FtZSA9IG5ldyBQaGFzZXIuR2FtZSg0ODAsIDMyMCwgUGhhc2VyLkFVVE8sICdTaG9vdGVyQmxpbmsnKTtcclxuZ2FtZS5zdGF0ZS5hZGQoJ0Jvb3QnLCBCb290LCB0cnVlKTsiXX0=
},{"./Boot.js":1}],7:[function(require,module,exports){
const Player = require('../Player.js');
const Enemy = require('../Enemy');

class Level {
	constructor(game) {
		this.game = game;

		this.map = game.add.tilemap('map', 16, 16);
		this.map.addTilesetImage('tilemap');

		game.add.tileSprite(0, 0, 10000, 10000, 'bg');
		game.world.setBounds(0, 0, 10000, 10000);

		this.layerMap = this.map.createLayer('map');
		this.layerMap.resizeWorld();

		this.map.setCollisionBetween(72, 79);
		this.map.setCollisionBetween(90, 97);

		this.deadRects = [];
		this.map.objects.deadArea.forEach(rect => {
			let rectangle = new Phaser.Rectangle(rect.x, rect.y, rect.width, rect.height);
			this.deadRects.push(rectangle);
		});

		this.enemies = [];
		this.map.objects.spawner.forEach(spawn => {
			let enemy = new Enemy(this.game, spawn.x + spawn.width / 2, spawn.y + spawn.height / 2, spawn.properties.type);
			this.enemies.push(enemy);
		});

		let posPlayer = this.map.objects.player[0];
		this.player = new Player(this.game, posPlayer.x + posPlayer.width / 2, posPlayer.y + posPlayer.height / 2);

		let arr = [];
		for (let i = 1; i < 300; i++) {
			arr.push(i);
		}
		this.game.pathfinder.setGrid(this.map.layers[0].data, arr);
	}

	update() {
		this.player.update();

		for (let i = 0; i < this.enemies.length; i++) {
			this.enemies[i].update();
		}
	}
}

module.exports = Level;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkxldmVsLmpzIl0sIm5hbWVzIjpbIlBsYXllciIsInJlcXVpcmUiLCJFbmVteSIsIkxldmVsIiwiY29uc3RydWN0b3IiLCJnYW1lIiwibWFwIiwiYWRkIiwidGlsZW1hcCIsImFkZFRpbGVzZXRJbWFnZSIsInRpbGVTcHJpdGUiLCJ3b3JsZCIsInNldEJvdW5kcyIsImxheWVyTWFwIiwiY3JlYXRlTGF5ZXIiLCJyZXNpemVXb3JsZCIsInNldENvbGxpc2lvbkJldHdlZW4iLCJkZWFkUmVjdHMiLCJvYmplY3RzIiwiZGVhZEFyZWEiLCJmb3JFYWNoIiwicmVjdCIsInJlY3RhbmdsZSIsIlBoYXNlciIsIlJlY3RhbmdsZSIsIngiLCJ5Iiwid2lkdGgiLCJoZWlnaHQiLCJwdXNoIiwiZW5lbWllcyIsInNwYXduZXIiLCJzcGF3biIsImVuZW15IiwicHJvcGVydGllcyIsInR5cGUiLCJwb3NQbGF5ZXIiLCJwbGF5ZXIiLCJhcnIiLCJpIiwicGF0aGZpbmRlciIsInNldEdyaWQiLCJsYXllcnMiLCJkYXRhIiwidXBkYXRlIiwibGVuZ3RoIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsU0FBU0MsUUFBUSxjQUFSLENBQWY7QUFDQSxNQUFNQyxRQUFRRCxRQUFRLFVBQVIsQ0FBZDs7QUFFQSxNQUFNRSxLQUFOLENBQVk7QUFDWEMsYUFBWUMsSUFBWixFQUFrQjtBQUNqQixPQUFLQSxJQUFMLEdBQVlBLElBQVo7O0FBRUEsT0FBS0MsR0FBTCxHQUFXRCxLQUFLRSxHQUFMLENBQVNDLE9BQVQsQ0FBaUIsS0FBakIsRUFBd0IsRUFBeEIsRUFBNEIsRUFBNUIsQ0FBWDtBQUNBLE9BQUtGLEdBQUwsQ0FBU0csZUFBVCxDQUF5QixTQUF6Qjs7QUFFQUosT0FBS0UsR0FBTCxDQUFTRyxVQUFULENBQW9CLENBQXBCLEVBQXVCLENBQXZCLEVBQTBCLEtBQTFCLEVBQWlDLEtBQWpDLEVBQXdDLElBQXhDO0FBQ0FMLE9BQUtNLEtBQUwsQ0FBV0MsU0FBWCxDQUFxQixDQUFyQixFQUF3QixDQUF4QixFQUEyQixLQUEzQixFQUFrQyxLQUFsQzs7QUFFQSxPQUFLQyxRQUFMLEdBQWdCLEtBQUtQLEdBQUwsQ0FBU1EsV0FBVCxDQUFxQixLQUFyQixDQUFoQjtBQUNBLE9BQUtELFFBQUwsQ0FBY0UsV0FBZDs7QUFFQSxPQUFLVCxHQUFMLENBQVNVLG1CQUFULENBQTZCLEVBQTdCLEVBQWlDLEVBQWpDO0FBQ0EsT0FBS1YsR0FBTCxDQUFTVSxtQkFBVCxDQUE2QixFQUE3QixFQUFpQyxFQUFqQzs7QUFFQSxPQUFLQyxTQUFMLEdBQWlCLEVBQWpCO0FBQ0EsT0FBS1gsR0FBTCxDQUFTWSxPQUFULENBQWlCQyxRQUFqQixDQUEwQkMsT0FBMUIsQ0FBbUNDLElBQUQsSUFBVTtBQUMzQyxPQUFJQyxZQUFZLElBQUlDLE9BQU9DLFNBQVgsQ0FBcUJILEtBQUtJLENBQTFCLEVBQTZCSixLQUFLSyxDQUFsQyxFQUFxQ0wsS0FBS00sS0FBMUMsRUFBaUROLEtBQUtPLE1BQXRELENBQWhCO0FBQ0EsUUFBS1gsU0FBTCxDQUFlWSxJQUFmLENBQW9CUCxTQUFwQjtBQUNBLEdBSEQ7O0FBS0EsT0FBS1EsT0FBTCxHQUFlLEVBQWY7QUFDQSxPQUFLeEIsR0FBTCxDQUFTWSxPQUFULENBQWlCYSxPQUFqQixDQUF5QlgsT0FBekIsQ0FBa0NZLEtBQUQsSUFBVztBQUMzQyxPQUFJQyxRQUFRLElBQUkvQixLQUFKLENBQVUsS0FBS0csSUFBZixFQUFxQjJCLE1BQU1QLENBQU4sR0FBUU8sTUFBTUwsS0FBTixHQUFZLENBQXpDLEVBQTRDSyxNQUFNTixDQUFOLEdBQVFNLE1BQU1KLE1BQU4sR0FBYSxDQUFqRSxFQUFvRUksTUFBTUUsVUFBTixDQUFpQkMsSUFBckYsQ0FBWjtBQUNBLFFBQUtMLE9BQUwsQ0FBYUQsSUFBYixDQUFrQkksS0FBbEI7QUFDQSxHQUhEOztBQUtBLE1BQUlHLFlBQVksS0FBSzlCLEdBQUwsQ0FBU1ksT0FBVCxDQUFpQm1CLE1BQWpCLENBQXdCLENBQXhCLENBQWhCO0FBQ0EsT0FBS0EsTUFBTCxHQUFjLElBQUlyQyxNQUFKLENBQVcsS0FBS0ssSUFBaEIsRUFBc0IrQixVQUFVWCxDQUFWLEdBQVlXLFVBQVVULEtBQVYsR0FBZ0IsQ0FBbEQsRUFBcURTLFVBQVVWLENBQVYsR0FBWVUsVUFBVVIsTUFBVixHQUFpQixDQUFsRixDQUFkOztBQUVBLE1BQUlVLE1BQU0sRUFBVjtBQUNBLE9BQUksSUFBSUMsSUFBSSxDQUFaLEVBQWVBLElBQUksR0FBbkIsRUFBd0JBLEdBQXhCLEVBQTZCO0FBQzVCRCxPQUFJVCxJQUFKLENBQVNVLENBQVQ7QUFDQTtBQUNELE9BQUtsQyxJQUFMLENBQVVtQyxVQUFWLENBQXFCQyxPQUFyQixDQUE2QixLQUFLbkMsR0FBTCxDQUFTb0MsTUFBVCxDQUFnQixDQUFoQixFQUFtQkMsSUFBaEQsRUFBc0RMLEdBQXREO0FBQ0E7O0FBRURNLFVBQVM7QUFDUixPQUFLUCxNQUFMLENBQVlPLE1BQVo7O0FBRUEsT0FBSSxJQUFJTCxJQUFJLENBQVosRUFBZUEsSUFBSSxLQUFLVCxPQUFMLENBQWFlLE1BQWhDLEVBQXdDTixHQUF4QyxFQUE2QztBQUM1QyxRQUFLVCxPQUFMLENBQWFTLENBQWIsRUFBZ0JLLE1BQWhCO0FBQ0E7QUFDRDtBQTVDVTs7QUFnRFpFLE9BQU9DLE9BQVAsR0FBaUI1QyxLQUFqQiIsImZpbGUiOiJMZXZlbC5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFBsYXllciA9IHJlcXVpcmUoJy4uL1BsYXllci5qcycpO1xyXG5jb25zdCBFbmVteSA9IHJlcXVpcmUoJy4uL0VuZW15Jyk7XHJcblxyXG5jbGFzcyBMZXZlbCB7XHJcblx0Y29uc3RydWN0b3IoZ2FtZSkge1xyXG5cdFx0dGhpcy5nYW1lID0gZ2FtZTtcclxuXHJcblx0XHR0aGlzLm1hcCA9IGdhbWUuYWRkLnRpbGVtYXAoJ21hcCcsIDE2LCAxNik7XHJcblx0XHR0aGlzLm1hcC5hZGRUaWxlc2V0SW1hZ2UoJ3RpbGVtYXAnKTtcclxuXHJcblx0XHRnYW1lLmFkZC50aWxlU3ByaXRlKDAsIDAsIDEwMDAwLCAxMDAwMCwgJ2JnJyk7XHJcblx0XHRnYW1lLndvcmxkLnNldEJvdW5kcygwLCAwLCAxMDAwMCwgMTAwMDApO1xyXG5cclxuXHRcdHRoaXMubGF5ZXJNYXAgPSB0aGlzLm1hcC5jcmVhdGVMYXllcignbWFwJyk7XHJcblx0XHR0aGlzLmxheWVyTWFwLnJlc2l6ZVdvcmxkKCk7XHJcblxyXG5cdFx0dGhpcy5tYXAuc2V0Q29sbGlzaW9uQmV0d2Vlbig3MiwgNzkpO1xyXG5cdFx0dGhpcy5tYXAuc2V0Q29sbGlzaW9uQmV0d2Vlbig5MCwgOTcpO1xyXG5cclxuXHRcdHRoaXMuZGVhZFJlY3RzID0gW107XHJcblx0XHR0aGlzLm1hcC5vYmplY3RzLmRlYWRBcmVhLmZvckVhY2goKHJlY3QpID0+IHtcclxuXHRcdFx0bGV0IHJlY3RhbmdsZSA9IG5ldyBQaGFzZXIuUmVjdGFuZ2xlKHJlY3QueCwgcmVjdC55LCByZWN0LndpZHRoLCByZWN0LmhlaWdodClcclxuXHRcdFx0dGhpcy5kZWFkUmVjdHMucHVzaChyZWN0YW5nbGUpO1xyXG5cdFx0fSk7XHJcblxyXG5cdFx0dGhpcy5lbmVtaWVzID0gW107XHJcblx0XHR0aGlzLm1hcC5vYmplY3RzLnNwYXduZXIuZm9yRWFjaCgoc3Bhd24pID0+IHtcclxuXHRcdFx0bGV0IGVuZW15ID0gbmV3IEVuZW15KHRoaXMuZ2FtZSwgc3Bhd24ueCtzcGF3bi53aWR0aC8yLCBzcGF3bi55K3NwYXduLmhlaWdodC8yLCBzcGF3bi5wcm9wZXJ0aWVzLnR5cGUpO1xyXG5cdFx0XHR0aGlzLmVuZW1pZXMucHVzaChlbmVteSk7XHJcblx0XHR9KTtcclxuXHJcblx0XHRsZXQgcG9zUGxheWVyID0gdGhpcy5tYXAub2JqZWN0cy5wbGF5ZXJbMF07XHJcblx0XHR0aGlzLnBsYXllciA9IG5ldyBQbGF5ZXIodGhpcy5nYW1lLCBwb3NQbGF5ZXIueCtwb3NQbGF5ZXIud2lkdGgvMiwgcG9zUGxheWVyLnkrcG9zUGxheWVyLmhlaWdodC8yKTtcclxuXHRcdFxyXG5cdFx0bGV0IGFyciA9IFtdO1xyXG5cdFx0Zm9yKGxldCBpID0gMTsgaSA8IDMwMDsgaSsrKSB7XHJcblx0XHRcdGFyci5wdXNoKGkpO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5nYW1lLnBhdGhmaW5kZXIuc2V0R3JpZCh0aGlzLm1hcC5sYXllcnNbMF0uZGF0YSwgYXJyKTtcclxuXHR9XHJcblxyXG5cdHVwZGF0ZSgpIHtcclxuXHRcdHRoaXMucGxheWVyLnVwZGF0ZSgpO1xyXG5cclxuXHRcdGZvcihsZXQgaSA9IDA7IGkgPCB0aGlzLmVuZW1pZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dGhpcy5lbmVtaWVzW2ldLnVwZGF0ZSgpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG5cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTGV2ZWw7Il19
},{"../Enemy":2,"../Player.js":4}]},{},[6])